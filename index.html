{% extends "base.html" %}
{% load markup %}

{% block content %}
<div class="note">
    <h2>Information</h2>
    <p>There are currently 1000 games hosted on this site.</p>
</div>

<div class="article">
<h2>Welcome to the Free Realms</h2>
<p>
  The Free Realms is a site dedicated to play-by-post role-playing games.
</p>

<h3>Create your own campaign</h3>
<p>
  In the Free Realms you can easily create your own campaign. Just follow the link below.
  (Note that you will need to log in with a
  <a href="https://www.google.com/accounts/">Google Account</a>.)
  <br />
  If you rather want to join one of the existing campaigns or just lurk around,
  view the list of hosted campaigns at the bottom of this page.
</p>
<ul class="buttonset">
  <li><a href="add">Create campaign</a></li>
</ul>
</div>

<div id="campaigns" class="endnote">
    <h2>Browse Campaigns</h2>

    <table class="results" cellspacing="0">
      <caption>Campaigns that fulfill your search criteria.</caption>
      <thead>
        <tr>
          <th>Campaign Name</th>
          <th>Game System</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        {% for campaign in campaigns %}
        <tr>
          <td>{{ campaign.key.name }}</td>
          <td>{{ campaign.system }}</td>
          {% if campaign.key.name == describe %}
          <td><a class="button" href="">Hide</a></td>
          {% else %}
          <td><a class="button" href="?describe={{ campaign.key.name|urlencode }}">Show</a></td>
          {% endif %}
        </tr>
        <tr>
          {% if campaign.key.name == describe %}
          <td colspan="3">
            {{ campaign.description|restructuredtext }}
          </td>
          {% endif %}
        </tr>
        {% endfor %}
        {% if not campaigns %}
        <tr>
          <td colspan="3">
            <p class="info">
                The are currently no campaigns online 
                fitting your search criteria.
            </p>
          </td>
        {% endif %}
        </tr>
      </tbody>
    </table>
    

    <form class="criteria" method="post" action="{{ here }}">
        <fieldset>
            <legend>Search Criteria</legend>
            <table>
                <tr>
                  <th><label for="form_keywords">Keywords</label></th>
                  <td><input type="text" name="form_keywords"
                    value="{{ keywords }}" />
                </tr>
                <tr>
                  <th><label for="active">Only active games</label></th>
                  <td><input type="checkbox" name="active" value="active"></td>
            </table>
        </fieldset>
        <input type="submit" name="search" value="Update campaign listing" />
    </form>
</div>
{% endblock content %}

